"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[17],{3017:(t,n,e)=>{e.r(n),e.d(n,{default:()=>v});var i=e(9379),s=e(5043),r=e(3023),a=e(1911),l=e(8776),o=e(3969),u=e(2775),c=e(3089),A=e(2097),m=e(2579),d=e(4527),p=e(5877),x=e(916),h=e(5362),b=e(9928),g=e(579);const j=t=>{if(!t)return{title:"",pattern:"",slots:[],items:{},pron_pattern:"",pron_dict:[],meaning_pattern:"",meaning_dict:[],meaning:""};const n={};return t.items&&"object"===typeof t.items&&Object.keys(t.items).forEach(e=>{n[e]=(t.items[e]||[]).map(t=>({hanzi:t.hanzi||"",pinyin:t.pinyin||"",pron:t.pron||t.pronunciation||"",meaning:t.meaning||t.ko||""}))}),{title:t.title||"",pattern:t.pattern||"",slots:Array.isArray(t.slots)?t.slots:[],items:n,pron_pattern:t.pron_pattern||"",pron_dict:Array.isArray(t.pron_dict)?t.pron_dict:[],meaning_pattern:t.meaning_pattern||"",meaning_dict:Array.isArray(t.meaning_dict)?t.meaning_dict:[],meaning:t.meaning||t.meaning_ko||t.ko||t.translation||""}};function v(t){let{open:n,onClose:e}=t;const{practice:v,setPractice:y,savePartFromState:f,savePartWithJSON:C,buildPartFromState:_}=(0,b.Q)(),k=v&&!Array.isArray(v)?v:{substitution:[]},[W,S]=(0,s.useState)("[]"),[O,z]=(0,s.useState)("");(0,s.useEffect)(()=>{n&&S(JSON.stringify(_("practice.substitution"),null,2))},[n,_]);const J=t=>t&&!Array.isArray(t)?t:{reading:[],writing:[],reorder:[],extension_phrases:[],substitution:[]},N=(t,n,e)=>y(s=>{const r=[...k.substitution||[]],a=j(r[t]);return r[t]=(0,i.A)((0,i.A)({},a),{},{[n]:e}),(0,i.A)((0,i.A)({},J(s)),{},{substitution:r})}),w=(t,n,e,s,r)=>y(a=>{const l=[...k.substitution||[]],o=j(l[t]),u=[...o.items[n]||[]];return u[e]=(0,i.A)((0,i.A)({},u[e]),{},{[s]:r}),o.items[n]=u,l[t]=o,(0,i.A)((0,i.A)({},J(a)),{},{substitution:l})});return(0,g.jsxs)(r.A,{open:n,onClose:e,maxWidth:"lg",fullWidth:!0,children:[(0,g.jsx)(a.A,{children:"\uad50\uccb4\uc5f0\uc2b5 (\ub2e4\uc911 \uc2ac\ub86f)"}),(0,g.jsxs)(l.A,{dividers:!0,children:[(k.substitution||[]).map((t,n)=>{const e=j(t);return(0,g.jsxs)(o.A,{sx:{mb:2,border:"1px solid #eee",p:2,borderRadius:1},children:[(0,g.jsx)(u.A,{label:"title",value:e.title||"",onChange:t=>N(n,"title",t.target.value),fullWidth:!0,sx:{mb:1}}),(0,g.jsx)(u.A,{label:"pattern",value:e.pattern||"",onChange:t=>N(n,"pattern",t.target.value),fullWidth:!0,sx:{mb:2}}),(0,g.jsx)(u.A,{label:"meaning (\ud328\ud134 \ud55c\uad6d\uc5b4: \uc608) \ub108 {object} \uc788\uc5b4?",value:e.meaning||"",onChange:t=>N(n,"meaning",t.target.value),fullWidth:!0,sx:{mb:2}}),(e.slots||[]).map(t=>{var s;return(0,g.jsxs)(o.A,{sx:{border:"1px dashed #bbb",p:1.5,mb:2,borderRadius:1},children:[(0,g.jsxs)(c.A,{container:!0,spacing:1,alignItems:"center",children:[(0,g.jsx)(c.A,{item:!0,xs:8,children:(0,g.jsx)(u.A,{label:"\uc2ac\ub86f \uc774\ub984",fullWidth:!0,value:t,onChange:e=>((t,n,e)=>y(s=>{const r=[...k.substitution||[]],a=j(r[t]),l=a.slots.map(t=>t===n?e:t),o=(0,i.A)({},a.items);return o[n]&&(o[e]=o[n],delete o[n]),r[t]=(0,i.A)((0,i.A)({},a),{},{slots:l,items:o}),(0,i.A)((0,i.A)({},J(s)),{},{substitution:r})}))(n,t,e.target.value)})}),(0,g.jsx)(c.A,{item:!0,xs:4,textAlign:"right",children:(0,g.jsx)(A.A,{color:"error",onClick:()=>((t,n)=>y(e=>{const s=[...k.substitution||[]],r=j(s[t]);r.slots=(r.slots||[]).filter(t=>t!==n);const a=(0,i.A)({},r.items||{});return delete a[n],s[t]=(0,i.A)((0,i.A)({},r),{},{items:a}),(0,i.A)((0,i.A)({},J(e)),{},{substitution:s})}))(n,t),children:"\uc2ac\ub86f \uc0ad\uc81c"})})]}),((null===(s=e.items)||void 0===s?void 0:s[t])||[]).map((e,s)=>(0,g.jsxs)(c.A,{container:!0,spacing:1,sx:{mt:1},children:[(0,g.jsx)(c.A,{item:!0,xs:3,children:(0,g.jsx)(u.A,{label:"\ud55c\uc790",value:e.hanzi||"",onChange:e=>w(n,t,s,"hanzi",e.target.value),fullWidth:!0})}),(0,g.jsx)(c.A,{item:!0,xs:3,children:(0,g.jsx)(u.A,{label:"\ubcd1\uc74c",value:e.pinyin||"",onChange:e=>w(n,t,s,"pinyin",e.target.value),fullWidth:!0})}),(0,g.jsx)(c.A,{item:!0,xs:3,children:(0,g.jsx)(u.A,{label:"\ubc1c\uc74c",value:e.pron||"",onChange:e=>w(n,t,s,"pron",e.target.value),fullWidth:!0})}),(0,g.jsx)(c.A,{item:!0,xs:3,children:(0,g.jsx)(u.A,{label:"\ub73b",value:e.meaning||"",onChange:e=>w(n,t,s,"meaning",e.target.value),fullWidth:!0})}),(0,g.jsx)(c.A,{item:!0,xs:12,children:(0,g.jsx)(m.A,{onClick:()=>((t,n,e)=>y(s=>{const r=[...k.substitution||[]],a=j(r[t]);return a.items[n]=(a.items[n]||[]).filter((t,n)=>n!==e),r[t]=a,(0,i.A)((0,i.A)({},J(s)),{},{substitution:r})}))(n,t,s),color:"error",children:(0,g.jsx)(h.A,{})})})]},"itm-".concat(n,"-").concat(t,"-").concat(s))),(0,g.jsx)(A.A,{size:"small",onClick:()=>((t,n)=>y(e=>{const s=[...k.substitution||[]],r=j(s[t]);return r.items[n]=[...r.items[n]||[],{hanzi:"",pinyin:"",pron:"",meaning:""}],s[t]=r,(0,i.A)((0,i.A)({},J(e)),{},{substitution:s})}))(n,t),children:"+ \uad50\uccb4\uc5b4 \ucd94\uac00"})]},t)}),(0,g.jsx)(A.A,{size:"small",onClick:()=>(t=>y(n=>{var e;const s=[...k.substitution||[]],r=j(s[t]),a="slot".concat(((null===(e=r.slots)||void 0===e?void 0:e.length)||0)+1);return r.slots=[...r.slots||[],a],r.items=(0,i.A)((0,i.A)({},r.items||{}),{},{[a]:[]}),s[t]=r,(0,i.A)((0,i.A)({},J(n)),{},{substitution:s})}))(n),children:"+ \uc2ac\ub86f \ucd94\uac00"}),(0,g.jsx)(m.A,{onClick:()=>(t=>y(n=>(0,i.A)((0,i.A)({},J(n)),{},{substitution:(k.substitution||[]).filter((n,e)=>e!==t)})))(n),color:"error",sx:{ml:1},children:(0,g.jsx)(h.A,{})})]},"sub-".concat(n))}),(0,g.jsx)(A.A,{onClick:()=>y(t=>(0,i.A)((0,i.A)({},J(t)),{},{substitution:[...k.substitution||[],{title:"",pattern:"",slots:[],items:{},pron_pattern:"",pron_dict:[],meaning_pattern:"",meaning_dict:[],meaning:""}]})),children:"+ \uad50\uccb4\uc5f0\uc2b5 \ucd94\uac00"}),(0,g.jsx)(d.A,{sx:{my:2}}),(0,g.jsx)(A.A,{variant:"contained",onClick:async()=>{try{await f("practice.substitution"),z("\uad50\uccb4\uc5f0\uc2b5 \uc800\uc7a5 \uc644\ub8cc")}catch(t){console.error(t),z("\uad50\uccb4\uc5f0\uc2b5 \uc800\uc7a5 \uc2e4\ud328")}},children:"\ud604\uc7ac \uac12\uc73c\ub85c \uc800\uc7a5"}),(0,g.jsx)(d.A,{sx:{my:2}}),(0,g.jsx)(u.A,{label:"\uc774 \ud30c\ud2b8 JSON \ud3b8\uc9d1 (practice.substitution)",value:W,onChange:t=>S(t.target.value),fullWidth:!0,multiline:!0,rows:12,sx:{fontFamily:"monospace"}}),(0,g.jsx)(o.A,{sx:{mt:1},children:(0,g.jsx)(A.A,{variant:"contained",onClick:async()=>{try{const t=JSON.parse(W);await C("practice.substitution",t),y(n=>(0,i.A)((0,i.A)({},J(n)),{},{substitution:t})),z("\uad50\uccb4\uc5f0\uc2b5(JSON) \uc800\uc7a5 \uc644\ub8cc")}catch(t){console.error(t),z("JSON \ud30c\uc2f1/\uc800\uc7a5 \uc2e4\ud328")}},children:"JSON\uc73c\ub85c \uc800\uc7a5"})})]}),(0,g.jsx)(p.A,{children:(0,g.jsx)(A.A,{onClick:e,children:"\ub2eb\uae30"})}),(0,g.jsx)(x.A,{open:!!O,autoHideDuration:2200,onClose:()=>z(""),message:O})]})}}}]);
//# sourceMappingURL=17.e26f5c1d.chunk.js.map