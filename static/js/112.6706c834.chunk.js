"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[112],{1112:(n,e,i)=>{i.r(e),i.d(e,{default:()=>N});var t=i(9379),s=i(5043),o=i(3023),r=i(1911),a=i(8776),l=i(9806),c=i(298),d=i(8065),x=i(2097),h=i(2579),u=i(2775),p=i(6803),A=i(3089),j=i(4799),m=i(5895),y=i(3759),g=i(5877),f=i(3969),v=i(5362),w=i(9302),z=i(1773),S=i(9817),k=i(9992),C=i(579);const b=(0,k.A)((0,C.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var I=i(9928),P=i(9946);const O={hanzi:"",pinyin:"",ko:"",pos:"",tags:[],sentence:"",sentencePinyin:"",sentenceKo:"",sentenceKoPronunciation:"",grammar:[],extensions:[{zh:"",pinyin:"",ko:"",koPron:""}],keyPoints:[],pronunciation:[]},J=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=(0,t.A)({},n);return e.zh||!e.hanzi&&!e.id||(e.zh=e.hanzi||e.id),null==e.sentenceKoPronunciation&&null!=e.sentencePron&&(e.sentenceKoPronunciation=e.sentencePron),Array.isArray(e.extensions)&&(e.extensions=e.extensions.map(n=>{const e=(0,t.A)({},n||{});return null==e.koPron&&null!=e.pron&&(e.koPron=e.pron),e})),e};function N(n){let{open:e,onClose:i}=n;const{unitId:t,unit:k,reloadUnit:N}=(0,I.Q)(),W=Array.isArray(null===k||void 0===k?void 0:k.vocabIds)?k.vocabIds:[],[M,T]=(0,s.useState)(null),[K,E]=(0,s.useState)(""),[R,F]=(0,s.useState)([]),[L,_]=(0,s.useState)(!1),[B,H]=(0,s.useState)(""),[Q,U]=(0,s.useState)({index:-1,originalId:""}),V=(0,s.useCallback)(async()=>{try{const n=W.length?await(0,P.pi)(W):[];F(n)}catch(n){console.error(n),F([])}},[W]);(0,s.useEffect)(()=>{e&&(T(null),E(""),_(!1),V())},[e,V]);const q=(0,s.useMemo)(()=>{const n=(K||"").trim().toLowerCase();if(!n)return R;return R.filter(e=>{var i,t,s,o;const r=null!==(i=null!==(t=null!==(s=e.zh)&&void 0!==s?s:e.hanzi)&&void 0!==t?t:e.id)&&void 0!==i?i:e.cn,a=Array.isArray(e.tags)?e.tags.join(" "):"";let l="";if("string"===typeof e.pronunciation)l=e.pronunciation;else if(Array.isArray(e.pronunciation)&&e.pronunciation.length){var c,d;l=(null===(c=e.pronunciation[0])||void 0===c?void 0:c.ko)||(null===(d=e.pronunciation[0])||void 0===d?void 0:d.pinyin)||""}return[r,e.pinyin,null!==(o=e.ko)&&void 0!==o?o:e.meaning,e.pos,a,e.sentence,e.sentencePinyin,e.sentenceKo,l].filter(Boolean).some(e=>(n=>(n||"").toString().toLowerCase())(e).includes(n))})},[R,K]),D=(n,e)=>{const i=String(e.id||e.zh||e.hanzi||"");U({index:n,originalId:i}),H(JSON.stringify(e,null,2)),_(!0)};return(0,C.jsxs)(o.A,{open:e,onClose:i,maxWidth:"xl",fullWidth:!0,children:[(0,C.jsx)(r.A,{children:"\ub2e8\uc5b4 \uad00\ub9ac (\uc720\ub2db) \u2014 /words \uc800\uc7a5 + unit.vocabIds \uc5f0\uacb0"}),(0,C.jsx)(a.A,{dividers:!0,sx:{p:0},children:(0,C.jsxs)(l.A,{maxWidth:"lg",sx:{py:2},children:[(0,C.jsxs)(c.A,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[(0,C.jsxs)(c.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,C.jsx)(d.A,{title:"\uc0c8 \ub2e8\uc5b4 \ucd94\uac00(\ud15c\ud50c\ub9bf\uc73c\ub85c \uc2dc\uc791)",children:(0,C.jsx)("span",{children:(0,C.jsx)(x.A,{variant:"contained",startIcon:(0,C.jsx)(b,{}),onClick:()=>{U({index:-1,originalId:""}),H(JSON.stringify(O,null,2)),_(!0)},sx:{textTransform:"none"},children:"\uc0c8 \ub2e8\uc5b4"})})}),(0,C.jsx)(d.A,{title:"\ubaa9\ub85d \uc0c8\ub85c\uace0\uce68",children:(0,C.jsx)("span",{children:(0,C.jsx)(h.A,{onClick:V,children:(0,C.jsx)(w.A,{})})})})]}),(0,C.jsx)(u.A,{placeholder:"\uac80\uc0c9: \ud55c\uc790/\ubcd1\uc74c/\ub73b/\uc608\ubb38/\ud488\uc0ac/\ud0dc\uadf8",size:"small",value:K,onChange:n=>E(n.target.value)})]}),M&&(0,C.jsx)(p.A,{severity:M.type,sx:{mb:2},children:M.text}),(0,C.jsx)(A.A,{container:!0,spacing:2,children:(0,C.jsx)(A.A,{item:!0,xs:12,children:(0,C.jsxs)(j.A,{variant:"outlined",sx:{p:2},children:[(0,C.jsxs)(m.A,{variant:"subtitle1",sx:{fontWeight:700,mb:1},children:["\ub2e8\uc5b4 \ubaa9\ub85d (",q.length," / ",R.length,")"]}),(0,C.jsxs)(c.A,{spacing:1,children:[q.map(n=>{var e,i;const s=n.zh||n.hanzi||n.id||"item";return(0,C.jsxs)(c.A,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:.75,borderRadius:1,"&:hover":{background:"#fafafa",cursor:"pointer"}},onClick:()=>D(R.indexOf(n),n),children:[(0,C.jsxs)(c.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,C.jsx)(m.A,{sx:{fontWeight:700,minWidth:80},children:s}),(0,C.jsxs)(m.A,{variant:"body2",color:"text.secondary",children:[(n.pinyin||"").trim()," \u2014 ",(null!==(e=null!==(i=n.ko)&&void 0!==i?i:n.meaning)&&void 0!==e?e:"").trim()]}),n.pos&&(0,C.jsx)(y.A,{size:"small",label:n.pos,sx:{ml:1}}),(n.tags||[]).map(n=>(0,C.jsx)(y.A,{size:"small",variant:"outlined",label:n,sx:{ml:.5}},n))]}),(0,C.jsxs)(c.A,{direction:"row",spacing:.5,alignItems:"center",onClick:n=>n.stopPropagation(),children:[(0,C.jsx)(d.A,{title:"JSON \ubcf5\uc0ac",children:(0,C.jsx)(h.A,{size:"small",onClick:()=>(async n=>{try{await navigator.clipboard.writeText(JSON.stringify(n,null,2)),T({type:"success",text:"JSON\uc774 \ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4."})}catch(e){T({type:"error",text:"\ubcf5\uc0ac \uc2e4\ud328: \ube0c\ub77c\uc6b0\uc800 \uad8c\ud55c\uc744 \ud655\uc778\ud558\uc138\uc694."})}})(n),children:(0,C.jsx)(S.A,{fontSize:"small"})})}),(0,C.jsx)(d.A,{title:"JSON \ud3b8\uc9d1",children:(0,C.jsx)(h.A,{size:"small",onClick:()=>D(R.indexOf(n),n),children:(0,C.jsx)(z.A,{fontSize:"small"})})}),(0,C.jsx)(d.A,{title:"\uc720\ub2db\uc5d0\uc11c \uc81c\uac70(\uc5f0\uacb0\ub9cc \uc0ad\uc81c)",children:(0,C.jsx)(h.A,{size:"small",onClick:()=>(async n=>{const e=String(n.id||n.zh||n.hanzi||"");if(e&&window.confirm("".concat(e," \ub2e8\uc5b4\ub97c \uc774 \uc720\ub2db\uc5d0\uc11c \uc81c\uac70\ud560\uae4c\uc694? (/words \ubb38\uc11c\ub294 \ubcf4\uc874\ub429\ub2c8\ub2e4)")))try{await(0,P.gM)(t,e),T({type:"success",text:"\uc720\ub2db\uc5d0\uc11c \uc81c\uac70 \uc644\ub8cc"}),await V(),"function"===typeof N&&await N()}catch(i){T({type:"error",text:(null===i||void 0===i?void 0:i.message)||"\uc81c\uac70 \uc2e4\ud328"})}})(n),children:(0,C.jsx)(v.A,{fontSize:"small"})})})]})]},s)}),0===q.length&&(0,C.jsx)(m.A,{variant:"body2",color:"text.secondary",children:"\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})]})]})})})]})}),(0,C.jsx)(g.A,{children:(0,C.jsx)(x.A,{onClick:i,children:"\ub2eb\uae30"})}),(0,C.jsxs)(o.A,{open:L,onClose:()=>_(!1),maxWidth:"md",fullWidth:!0,children:[(0,C.jsx)(r.A,{children:(0,C.jsx)(c.A,{direction:"row",justifyContent:"space-between",alignItems:"center",children:(0,C.jsxs)(m.A,{variant:"h6",sx:{fontWeight:700},children:["JSON \ud3b8\uc9d1 \u2014 ",Q.index>=0?Q.originalId:"\uc0c8 \ub2e8\uc5b4"]})})}),(0,C.jsxs)(a.A,{dividers:!0,children:[(0,C.jsx)(u.A,{value:B,onChange:n=>H(n.target.value),multiline:!0,minRows:18,fullWidth:!0,InputProps:{sx:{fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",fontSize:13}}}),(0,C.jsxs)(m.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["* ",(0,C.jsx)("b",{children:"zh/hanzi/id"})," \uc911 \ud558\ub098\ub294 \ubc18\ub4dc\uc2dc \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4. \uc800\uc7a5 \uc2dc /words\uc5d0 \ubc18\uc601\ub418\uace0 \ud604\uc7ac \uc720\ub2db\uc5d0 \uc5f0\uacb0\ub429\ub2c8\ub2e4."]})]}),(0,C.jsxs)(g.A,{children:[(0,C.jsx)(x.A,{onClick:()=>_(!1),sx:{textTransform:"none"},children:"\ub2eb\uae30"}),(0,C.jsx)(x.A,{variant:"contained",onClick:async()=>{try{const n=JSON.parse(B);if(!n||"object"!==typeof n)throw new Error("\uc62c\ubc14\ub978 JSON \uac1d\uccb4\uac00 \uc544\ub2d9\ub2c8\ub2e4.");const e=J(n),i=String(e.zh||e.hanzi||e.id||"").trim();if(!i)throw new Error("wordId(zh/hanzi/id)\uac00 \ud544\uc694\ud569\ub2c8\ub2e4.");await(0,P.kS)(i,e);const s=Q.originalId;s?s!==i&&(await(0,P.gM)(t,s),await(0,P.TP)(t,[i])):await(0,P.TP)(t,[i]),T({type:"success",text:"\uc800\uc7a5 \uc644\ub8cc"}),_(!1),await V(),"function"===typeof N&&await N()}catch(n){T({type:"error",text:"JSON \uc800\uc7a5 \uc2e4\ud328: ".concat(n.message)})}},sx:{textTransform:"none"},children:"\uc800\uc7a5"})]})]}),M&&(0,C.jsx)(f.A,{sx:{position:"fixed",inset:"auto 24px 24px auto",zIndex:1300},children:(0,C.jsx)(p.A,{severity:M.type,onClose:()=>T(null),variant:"filled",sx:{boxShadow:2},children:M.text})})]})}}}]);
//# sourceMappingURL=112.6706c834.chunk.js.map